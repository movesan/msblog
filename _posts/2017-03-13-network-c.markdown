---
layout:     post
title:      "计算机网络基础（三）---IP地址，子网掩码，默认网关"
subtitle:   "  "
date:       2017-03-13 6:25:00
author:     "Movesan"
header-img: "img/post-bg/post-bg-network.jpg"
catalog: true
tags:
    - 网络基础

---

>[计算机网络基础（一）---OSI 七层模型](http://movesan.me/2017/03/09/network-a/)<br>
>[计算机网络基础（二）---TCP/IP 四层模型](http://movesan.me/2017/03/09/network-b/)<br>

---

## IP地址

电脑之间要实现网络通信，就必须要有一个合法的ip地址。IP地址=网络地址+主机地址，（又称：主机号和网络号组成）ip地址的结构使我们可以在Internet上很方便的寻址。

ip地址通常用更直观的，以圆点分隔号的四个十进制数字表示，每个数字从0到255，如某一台主机的ip地址为：128.20.4.1在局域网里，同样也需要ip地址，一般内网的ip地址是以192.168开头的，这样很容易区分公网和内网的ip地址。

IP地址是在数据封装过程中网络层进行写入的，其中包括源IP地址和目的IP地址，这样才实现了不同主机之间的数据传递和网络通信。IP包头结构如下图所示：

![img](/img/post-in/network-c-1.png)

#### IP地址分类

最初设计互联网络时，为了便于寻址以及层次化构造网络，每个IP地址包括两个标识码（ID），即网络ID和主机ID。同一个物理网络上的所有主机都使用同一个网络ID，网络上的一个主机
（包括网络上工作站，服务器和路由器等）有一个主机ID与其对应。Internet委员会定义了5种IP地址类型以适合不同容量的网络，即A类~E类。

其中A、B、C3类（如下表格）由InternetNIC在全球范围内统一分配，D、E类为特殊地址。

![img](/img/post-in/network-c-2.png)

**注：**

* 127只有一个网段，就是127.0.0.1，代表当前计算机自己，同localhost
* 我们能用的最大ip为223.x.x.x
* 每个网络的第一个地址如1.0.0.0代表网络本身，不能分配；最后一个网络地址如1.255.255.255代表当前网络的广播地址
* 私网ip可以作为内网使用，谁都可以用，但不能访问公网；起到了保护公网ip的作用

#### 如何理解

我们先来看一个例子：

>如图所示，住在北大街的住户要能互相找到对方，必须各自都要有个门牌号，这个门牌号就是各家的地址，门牌号的表示方法为:北大街+XX号。假如1号住户要找6号住户，过程是这样的，1号在大街上喊了一声:
>"谁是6号，请回答。"，这时北大街的住户都听到了，但只有6号作了回答，这个喊的过程叫"广播"，北大街的所有用户就是他的广播范围，假如北大街共有20个用户，那广播地址就是:北大街 21号。也就是说，
>北大街的任何一个用户喊一声能让"广播地址-1"个用户听到。

![img](/img/post-in/network-c-3.jpg)

从这个例中可以抽出下面几个词:

**街道地址:**北大街，如果给该大街一个地址则用第一个住户的地址-1，此例为:北大街0号 <br>
**住户的号:**如1号，2号等 <br>
**住户的地址:**街道地址+XX号，如北大街 1号，北大街 2号等 <br>
**广播地址:**最后一个住户的地址+1，此例为:北大街21号 <br>

Internet网络中，每个上网的计算机都有一个像上述例子的地址，这个地址就是IP地址，是分配给网络设备的门牌号，为了网络中的计算机能够互相访问，IP地址=网络地址+主机地址，如IP地址是192.168.100.1，这个地址中包含了很多含义。如下所示:

**网络地址(相当于街道地址):** 192.168.100.0 <br>
**主机地址(相当于各户的门号):** 0.0.0.1 <br>
**IP地址(相当于住户地址):** 网络地址+主机地址=192.168.100.1 <br>
**广播地址:** 192.168.100.255 <br>

用网线直接连接的计算机或是通过HUB（集线器）或普通交换机间接的计算机之间要能够相互通计算机必须要在同一网络也就是说它们的网络地址必须相同而且主机地址必须不一样。如果不在一个网络就无法通。这就像我们上面举的例子同是北大街的住户由于街道名称都是北大街且各自的门牌号不同所以能够相互找到对方。

计算网络地址就是判断网络中的计算机在不在同一网络在就能通不在就不能通。注意这里说的在不在同一网络指的是IP地址而不是物理连接。那么如何计算呢？

---

## 子网掩码

我们日常生活中的地址如:北大街1号，从字面上就能看出街道地址是北大街，而我们从IP地址中却难以看出网络地址，要计算网络地址，必须借助子网掩码。

计算过程是这样的，将IP地址和子网掩码都换算成二进制，然后进行与运算，结果就是网络地址.与运算如下所示，上下对齐，1位1位的算，1与1=1 ，其余组合都为0

![img](/img/post-in/network-c-4.png)

其中广播地址是专门用于同时向网络中所有工作站进行发送的一个地址。

子网掩码是用来判断任意两台计算机的ip地址是否属于同一子网络的根据。最为简单的理解就是两台计算机各自的ip地址与子网掩码进行and运算后，得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。

**注：**子网掩码不是必须为255.255.255.0形式，只要为连续1就可以；ip可以随意分配合理的子网掩码

---

## 默认网关

#### 什么是网关

网关到底是什么呢？网关实质上是一个网络通向其他网络的IP地址。比如有网络A和网络B，网络A的IP地址范围为“192.168.1.1~192. 168.1.254”，子网掩码为255.255.255.0；网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机（或集线器）上，TCP/IP协议也会根据子网掩码（255.255.255.0）判定两个网络中的主机处在不同的网络里。而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机（如附图所示）。网络A向网络B转发数据包的过程。

所以说，只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。那么这个IP地址是哪台机器的IP地址呢？网关的IP地址是具有路由功能的设备的IP地址，具有路由功能的设备有路由器、启用了路由协议的服务器（实质上相当于一台路由器）、代理服务器（也相当于一台路由器）。

#### 举例说明

![img](/img/post-in/network-c-5.jpg)

假设你的名字叫小不点(很小)，你住在一个大院子里，你的邻居有很多小伙伴，父母是你的网关。当你想跟院子里的某个小伙伴玩，只要你在院子里大喊一声
他的名字，他听到了就会回应你，并且跑出来跟你玩。

但是你家长不允许你走出大门，你想与外界发生的一切联系，都必须由父母（网关）用电话帮助你联系。假如你想找你的同学小明聊天，小明家住在很远的另外一个院子里，他家里也有父母（小明的网关）。但是你不知道小明家的电话号码，不过你的班主任老师有一份你们班全体同学的名单和电话号码对照表，你的老师就是你的DNS服务器。于是你在家里和父母有了下面的对话：

>小不点：妈妈(或爸爸),我想找班主任查一下小明的电话号码行吗？ <br>
>家长：好，你等着。（接着你家长给你的班主任挂了一个电话，问清楚了小明的电话）问到了，他家的号码是211.99.99.99 <br>
>小不点：太好了！妈(或爸),我想找小明，你再帮我联系一下小明吧。 <br>
>家长：没问题。（接着家长向电话局发出了请求接通小明家电话的请求，最后一关当然是被转接到了小明家家长那里，然后他家长把电话给转到小明）。 <br>

就这样你和小明取得了联系。

#### 默认网关

如果搞清了什么是网关，默认网关也就好理解了。就好像一个房间可以有多扇门一样，一台主机可以有多个网关。默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。默认网关。默认网关一般填写192.168.x.1

---

## 引用链接

[IP地址，子网掩码、默认网关，DNS服务器是什么意思?](http://www.cnblogs.com/songQQ/archive/2009/05/27/1490612.html) <br>
[网关 - 百度百科](http://baike.baidu.com/view/807.htm) <br>
