---
layout:     post
title:      "计算机网络基础（二）---TCP/IP 四层模型"
subtitle:   "  "
date:       2017-03-09 6:25:00
author:     "Movesan"
header-img: "img/post-bg/post-bg-network.jpg"
catalog: true
tags:
    - 网络基础

---

>[计算机网络基础（一）---OSI 七层模型](http://movesan.me/2017/03/09/network-a/)<br>
>[计算机网络基础（三）---IP地址，子网掩码，默认网关](http://movesan.me/2017/03/13/network-c/)<br>

---

## 引言

TCP/IP 四层模型为OSI 七层模型的演变，为我们现在互联网中所用的网络模型。关于为什么会有TCP/IP 四层模型，你可以理解为OSI 七层模型相当于汽车模型，而TCP/IP 四层模型则为具体设计出来的汽车，
简单讲就是TCP/IP 四层模型可能更实用合理些。

---

## TCP/IP 四层模型

让我们先来看下TCP/IP 四层模型与OSI 七层模型的比较：

![img](/img/post-in/network-b-1.png)

**网络接口层**

负责监视数据在主机和网络之间的交换。事实上，TCP/IP本身并未定义该层的协议，而由参与互连的各网络使用自己的物理层和数据链路层协议，然后与TCP/IP的网络接入层进行连接。

地址解析协议（ARP）工作在此层，即OSI参考模型的数据链路层。
>地址解析协议（ARP）作用是把IP翻译成网卡物理地址，因为在公网中传递数据靠IP，局域网中靠MAC地址

**网际互联层**

主要解决主机到主机的通信问题。它所包含的协议设计数据包在整个网络上的逻辑传输。

该层有三个主要协议：网际协议(IP)、互联网组管理协议（IGMP）和互联网控制报文协议（ICMP）。

**传输层**

为应用层实体提供端到端的通信功能，保证了数据包的顺序传送以及数据的完整性。

该层定义了两个主要的协议：传输控制协议（TCP）和用户数据报协议（UDP）。
>传输控制协议（TCP）:可靠面向连接；用户数据报协议（UDP）：不可靠面向无连接

**应用层**

为用户提供所需要的各种服务，例如：FTP、Telnet、DNS、SMTP等。

---

## 数据封装过程

![img](/img/post-in/network-b-2.png)

---

## TCP/IP模型与OSI模型比较

#### 共同点

* 都采用了层次结构概念
* 都能够提供面向连接和无连接两种通信服务机制

#### 不同点

* 前者是七层模型，后者是四层机构
* 对可靠性要求不同（后者更高）
* OSI模型是在协议开发前设计的，具有通用性；TCP/IP是先有协议集然后建立模型，不适用于非TCP/IP网络
* 实际市场应用不同（OSI模型只是理论上的模型，并没有成熟的产品，而TCP/IP已经成为“实际上的国际标准”）

---

## TCP/IP 协议族常用协议

**应用层：**TFTP，HTTP，SNMP，FTP，SMTP，DNS，Telnet 等等 <br>
**传输层：**TCP，UDP <br>
**网络层：**IP，ICMP，OSPF，EIGRP，IGMP <br>
**数据链路层：**SLIP，CSLIP，PPP，MTU <br>

重要的 TCP/IP 协议族协议进行简单介绍:

* IP(Internet Protocol,网际协议)是网间层的主要协议,任务是在源地址和和目的地址之间传输数据。IP 协议只是尽最大努力来传输数据包,并不保证所有的包都可以传输 到目的地,也不保证数据包的顺序和唯一。

>IP 定义了 TCP/IP 的地址,寻址方法,以及路由规则。现在广泛使用的 IP 协议有 IPv4 和 IPv6 两种:IPv4 使用 32 位二进制整数做地址,一般使用点分十进制方式表示,比如 192.168.0.1。<br>
>IP 地址由两部分组成,即网络号和主机号。故一个完整的 IPv4 地址往往表示 为 192.168.0.1/24 或192.168.0.1/255.255.255.0 这种形式。<br>
>IPv6 是为了解决 IPv4 地址耗尽和其它一些问题而研发的最新版本的 IP。使用 128 位 整数表示地址,通常使用冒号分隔的十六进制来表示,并且可以省略其中一串连续的 0,如:fe80::200:1ff:fe00:1。
目前使用并不多！<br>

* ICMP(Internet Control Message Protocol,网络控制消息协议)是 TCP/IP 的 核心协议之一,用于在 IP 网络中发送控制消息,􏰁供通信过程中的各种问题反馈。 ICMP 直接使用 IP 数据包传输,但 ICMP 并不被视为 IP 协议的子协议。常见的联网状态诊断工具比如依赖于 ICMP 协议;
* TCP(TransmissionControlProtocol,传输控制协议)是一种面向连接的,可靠的, 基于字节流传输的通信协议。TCP 具有端口号的概念,用来标识同一个地址上的不 同应用。􏰂述 TCP 的标准文档是 RFC793。
* UDP(UserDatagramProtocol,用户数据报协议)是一个面向数据报的传输层协 议。UDP 的传输是不可靠的,简单的说就是发了不管,发送者不会知道目标地址 的数据通路是否发生拥塞,也不知道数据是否到达,是否完整以及是否还是原来的 次序。它同 TCP 一样有用来标识本地应用的端口号。所以应用 UDP 的应用,都能 够容忍一定数量的错误和丢包,但是对传输性能敏感的,比如流媒体、DNS 等。
* ECHO(EchoProtocol,回声协议)是一个简单的调试和检测工具。服务器器会 原样回发它收到的任何数据,既可以使用 TCP 传输,也可以使用 UDP 传输。使用 端口号 7 。
* DHCP(DynamicHostConfigrationProtocol,动态主机配置协议)是用于局域 网自动分配 IP 地址和主机配置的协议。可以使局域网的部署更加简单。
* DNS(DomainNameSystem,域名系统)是互联网的一项服务,可以简单的将用“.” 分隔的一般会有意义的域名转换成不易记忆的 IP 地址。一般使用 UDP 协议传输, 也可以使用 TCP,默认服务端口号 53。􏰂
* FTP(FileTransferProtocol,文件传输协议)是用来进行文件传输的标准协议。 FTP 基于 TCP 使用端口号 20 来传输数据,21 来传输控制信息。
* TFTP(Trivial File Transfer Protocol,简单文件传输协议)是一个简化的文 件传输协议,其设计非常简单,通过少量存储器就能轻松实现,所以一般被用来通 过网络引导计算机过程中传输引导文件等小文件;
* SSH(SecureShell,安全Shell),因为传统的网络服务程序比如TELNET本质上都极不安全,明文传说数据和用户信息包括密码,SSH 被开发出来避免这些问题, 它其实是一个协议框架,有大量的扩展冗余能力,并且􏰁供了加密压缩的通道可以 为其他协议使用。
* POP(PostOfficeProtocol,邮局协议)是支持通过客户端访问电子邮件的服务, 现在版本是 POP3,也有加密的版本 POP3S。协议使用 TCP,端口 110。
* SMTP(Simple Mail Transfer Protocol,简单邮件传输协议)是现在在互联网 上发送电子邮件的事实标准。使用 TCP 协议传输,端口号 25。
* HTTP(HyperTextTransferProtocol,超文本传输协议)是现在广为流行的WEB 网络的基础,HTTPS 是 HTTP 的加密安全版本。协议通过 TCP 传输,HTTP 默认 使用端口 80,HTTPS 使用 443。
